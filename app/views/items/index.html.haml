- content_for :title, "Items - "

%h2 Items

%a{href: items_export_path} create csv export
%a{href: item_types_path} create item type
%br
%br
.filters
  %label{for: 'item_filter'}= 'Item filter:'
  .value
    %img.spinner{:src => asset_path('spinner.gif'), :alt => 'Loading...'}
    %input#item_filter.item_index{:type => 'text'}
    %img#item_filter_clear{:src => asset_path('icons/cross.png'), :alt => 'Clear'}

%table{border: 1}
  %thead
    %tr
      %th Case
      %th Name
      %th Manufacturer
      %th Model
      %th Location
      %th Action
  %tbody
    - @items.sort_by{ |i| i.name }.each do |item|
      %tr
        %td= item.case.name
        - if item.missing
          %td.missing{title: "missing"}
            %a{href: item_path(item)}= item.name
        - elsif item.broken
          %td.broken{title: "broken"}
            %a{href: item_path(item)}= item.name
        - else
          %td.no_color
            %a{href: item_path(item)}= item.name

        %td.no_color
          %a{href: item_path(item)}= item.manufacturer
        %td.no_color
          %a{href: item_path(item)}= item.model
        %td.no_color
          - if item.location
            %a{href: item_path(item.location)}= item.location.name
        %td
          %a{href: item_path(item)} show
          %a{href: edit_item_path(item)} edit